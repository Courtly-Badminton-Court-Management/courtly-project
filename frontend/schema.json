{"openapi":"3.0.3","info":{"title":"Courtly API","version":"1.0.0","description":"Badminton Court Management & Booking System"},"paths":{"/api/auth/{user_id}/":{"get":{"operationId":"auth_retrieve","parameters":[{"in":"path","name":"user_id","schema":{"type":"integer"},"required":true}],"tags":["auth"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/auth/auth/coins/add/":{"post":{"operationId":"auth_auth_coins_add_create","tags":["auth"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/auth/auth/login/":{"post":{"operationId":"auth_auth_login_create","description":"POST /api/auth/login/ with {username,password} or {email,password}\nReturns: {access, refresh, firstLogin, user}","tags":["auth"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourtlyTokenObtainPair"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/CourtlyTokenObtainPair"}},"multipart/form-data":{"schema":{"$ref":"#/components/schemas/CourtlyTokenObtainPair"}}},"required":true},"security":[{}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourtlyTokenObtainPair"}}},"description":""}}}},"/api/auth/auth/me/":{"get":{"operationId":"auth_auth_me_retrieve","tags":["auth"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}},"patch":{"operationId":"auth_auth_me_partial_update","tags":["auth"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/auth/auth/register/":{"post":{"operationId":"auth_auth_register_create","description":"POST /api/auth/register/\nBody accepts: username, email, password, confirm, firstname, lastname, accept\n(serializer maps firstname/lastname -> first_name/last_name)","tags":["auth"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Register"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Register"}},"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Register"}}},"required":true},"security":[{"cookieAuth":[]},{"jwtAuth":[]},{}],"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Register"}}},"description":""}}}},"/api/auth/auth/token/refresh/":{"post":{"operationId":"auth_auth_token_refresh_create","description":"Takes a refresh type JSON web token and returns an access type JSON web\ntoken if the refresh token is valid.","tags":["auth"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}},"multipart/form-data":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}}},"required":true},"security":[{}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}}},"description":""}}}},"/api/auth/login/":{"post":{"operationId":"auth_login_create","description":"POST /api/auth/login/ with {username,password} or {email,password}\nReturns: {access, refresh, firstLogin, user}","tags":["auth"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourtlyTokenObtainPair"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/CourtlyTokenObtainPair"}},"multipart/form-data":{"schema":{"$ref":"#/components/schemas/CourtlyTokenObtainPair"}}},"required":true},"security":[{}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CourtlyTokenObtainPair"}}},"description":""}}}},"/api/auth/me/":{"get":{"operationId":"auth_me_retrieve","tags":["auth"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}},"patch":{"operationId":"auth_me_partial_update","tags":["auth"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/auth/register/":{"post":{"operationId":"auth_register_create","description":"POST /api/auth/register/\nBody accepts: username, email, password, confirm, firstname, lastname, accept\n(serializer maps firstname/lastname -> first_name/last_name)","tags":["auth"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Register"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Register"}},"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Register"}}},"required":true},"security":[{"cookieAuth":[]},{"jwtAuth":[]},{}],"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Register"}}},"description":""}}}},"/api/auth/token/refresh/":{"post":{"operationId":"auth_token_refresh_create","description":"Takes a refresh type JSON web token and returns an access type JSON web\ntoken if the refresh token is valid.","tags":["auth"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}},"multipart/form-data":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}}},"required":true},"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefresh"}}},"description":""}}}},"/api/available-slots/":{"get":{"operationId":"available_slots_retrieve","description":"Public calendar: GET /available-slots/?club=<id>&month=YYYY-MM","tags":["available-slots"],"security":[{"cookieAuth":[]},{"jwtAuth":[]},{}],"responses":{"200":{"description":"No response body"}}}},"/api/booking/":{"post":{"operationId":"booking_create","tags":["booking"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/booking/{booking_no}/":{"get":{"operationId":"booking_retrieve","parameters":[{"in":"path","name":"booking_no","schema":{"type":"string"},"required":true}],"tags":["booking"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/booking/{booking_no}/cancel/":{"post":{"operationId":"booking_cancel_create","parameters":[{"in":"path","name":"booking_no","schema":{"type":"string"},"required":true}],"tags":["booking"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/booking/{booking_no}/checkin/":{"post":{"operationId":"booking_checkin_create","description":"Manager performs check-in:\n  - Booking.status → \"checkin\"\n  - All SlotStatus for this booking → \"checkin\"","parameters":[{"in":"path","name":"booking_no","schema":{"type":"string"},"required":true}],"tags":["booking"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/booking/walkin/":{"post":{"operationId":"booking_walkin_create","tags":["booking"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/bookings/":{"get":{"operationId":"bookings_retrieve","description":"Managers/Admins — Get all bookings in the system.","tags":["bookings"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/bookings/upcoming/":{"get":{"operationId":"bookings_upcoming_retrieve","description":"Managers — Get upcoming confirmed bookings only.","tags":["bookings"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/month-view/":{"get":{"operationId":"month_view_retrieve","description":"GET /api/month-view/?club=1&month=2025-11","tags":["month-view"],"security":[{"cookieAuth":[]},{"jwtAuth":[]},{}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Slot"}}},"description":""}}}},"/api/my-booking/":{"get":{"operationId":"my_booking_retrieve","description":"Players — Get bookings belonging to the current user.","tags":["my-booking"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/my-booking/upcoming/":{"get":{"operationId":"my_booking_upcoming_retrieve","description":"Player — Get their own upcoming confirmed bookings.","tags":["my-booking"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/slots/":{"get":{"operationId":"slots_list","tags":["slots"],"security":[{"cookieAuth":[]},{"jwtAuth":[]},{}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Slot"}}}},"description":""}}}},"/api/slots/{id}/":{"get":{"operationId":"slots_retrieve","parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"description":"A unique integer value identifying this slot.","required":true}],"tags":["slots"],"security":[{"cookieAuth":[]},{"jwtAuth":[]},{}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Slot"}}},"description":""}}}},"/api/slots/month-view/":{"get":{"operationId":"slots_month_view_retrieve","description":"GET /api/month-view/?club=1&month=2025-11","tags":["slots"],"security":[{"cookieAuth":[]},{"jwtAuth":[]},{}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Slot"}}},"description":""}}}},"/api/slots/slots-list/":{"post":{"operationId":"slots_slots_list_create","description":"POST /api/slots/slots-list/\nBody: {\n    \"slot_list\": [\"25188\", \"25189\"]\n}","tags":["slots"],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Slot"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Slot"}},"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Slot"}}},"required":true},"security":[{"cookieAuth":[]},{"jwtAuth":[]},{}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Slot"}}},"description":""}}}},"/api/slots/status/":{"post":{"operationId":"slots_status_create","description":"Simple bulk slot status update.","tags":["slots"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/slots/update-status/":{"post":{"operationId":"slots_update_status_create","tags":["slots"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/wallet/balance/":{"get":{"operationId":"wallet_balance_retrieve","tags":["wallet"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"description":"No response body"}}}},"/api/wallet/ledger/":{"get":{"operationId":"wallet_ledger_list","tags":["wallet"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CoinLedger"}}}},"description":""}}}},"/api/wallet/ledger/export-csv/":{"get":{"operationId":"wallet_ledger_export_csv_retrieve","tags":["wallet"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CoinLedger"}}},"description":""}}}},"/api/wallet/topups/":{"get":{"operationId":"wallet_topups_list","tags":["wallet"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TopupRequestList"}}}},"description":""}}},"post":{"operationId":"wallet_topups_create","tags":["wallet"],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/TopupRequestCreate"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/TopupRequestCreate"}}},"required":true},"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupRequestCreate"}}},"description":""}}}},"/api/wallet/topups/{id}/":{"get":{"operationId":"wallet_topups_retrieve","parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"tags":["wallet"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}}},"description":""}}},"put":{"operationId":"wallet_topups_update","parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"tags":["wallet"],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}}}},"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}}},"description":""}}},"patch":{"operationId":"wallet_topups_partial_update","parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"tags":["wallet"],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/PatchedTopupRequestList"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/PatchedTopupRequestList"}}}},"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}}},"description":""}}},"delete":{"operationId":"wallet_topups_destroy","parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"tags":["wallet"],"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"204":{"description":"No response body"}}}},"/api/wallet/topups/{id}/approve/":{"post":{"operationId":"wallet_topups_approve_create","parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"tags":["wallet"],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}}}},"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}}},"description":""}}}},"/api/wallet/topups/{id}/reject/":{"post":{"operationId":"wallet_topups_reject_create","parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true}],"tags":["wallet"],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}}}},"security":[{"cookieAuth":[]},{"jwtAuth":[]}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TopupRequestList"}}},"description":""}}}}},"components":{"schemas":{"CoinLedger":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"type":{"$ref":"#/components/schemas/TypeEnum"},"amount":{"type":"integer","maximum":2147483647,"minimum":-2147483648,"description":"+ เข้า (topup/refund), - ออก (capture)"},"ref_booking":{"type":"integer","nullable":true},"created_at":{"type":"string","format":"date-time","readOnly":true}},"required":["amount","created_at","id","type"]},"CourtlyTokenObtainPair":{"type":"object","description":"Accepts either {\"username\",\"password\"} or {\"email\",\"password\"}.\nMakes 'username' optional so posting only email works.\nAlso updates last_login and returns { firstLogin, user }.","properties":{"username":{"type":"string","writeOnly":true},"password":{"type":"string","writeOnly":true},"email":{"type":"string","format":"email"}},"required":["password"]},"PatchedTopupRequestList":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"username":{"type":"string","readOnly":true},"amount_thb":{"type":"integer","readOnly":true},"coins":{"type":"integer","readOnly":true},"transfer_date":{"type":"string","format":"date","readOnly":true,"nullable":true},"transfer_time":{"type":"string","format":"time","readOnly":true,"nullable":true},"slip_url":{"type":"string","readOnly":true},"status":{"allOf":[{"$ref":"#/components/schemas/StatusEnum"}],"readOnly":true},"created_at":{"type":"string","format":"date-time","readOnly":true}}},"Register":{"type":"object","properties":{"username":{"type":"string","description":"Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.","pattern":"^[\\w.@+-]+$","maxLength":150},"email":{"type":"string","format":"email","maxLength":254},"firstname":{"type":"string"},"lastname":{"type":"string"},"password":{"type":"string","writeOnly":true,"minLength":8},"confirm":{"type":"string","writeOnly":true},"accept":{"type":"boolean","writeOnly":true}},"required":["accept","confirm","email","firstname","lastname","password","username"]},"Slot":{"type":"object","description":"Serializer for Slot model.\nConverts start_at and end_at to local time (HH:MM format).\nIncludes slot_status, court name, and price_coin.","properties":{"id":{"type":"integer","readOnly":true},"slot_status":{"type":"string","readOnly":true},"service_date":{"type":"string","format":"date"},"start_time":{"type":"string","readOnly":true},"end_time":{"type":"string","readOnly":true},"court":{"type":"integer"},"court_name":{"type":"string"},"price_coin":{"type":"integer"},"booking_id":{"type":"string","readOnly":true}},"required":["booking_id","court","court_name","end_time","id","price_coin","service_date","slot_status","start_time"]},"StatusEnum":{"enum":["pending","approved","rejected"],"type":"string","description":"* `pending` - Pending\n* `approved` - Approved\n* `rejected` - Rejected"},"TokenRefresh":{"type":"object","properties":{"access":{"type":"string","readOnly":true},"refresh":{"type":"string","writeOnly":true}},"required":["access","refresh"]},"TopupRequestCreate":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"amount_thb":{"type":"integer","maximum":2147483647,"minimum":0},"coins":{"type":"integer","readOnly":true},"transfer_date":{"type":"string","format":"date","nullable":true},"transfer_time":{"type":"string","format":"time","nullable":true},"slip_path":{"type":"string","format":"uri","writeOnly":true},"slip_url":{"type":"string","readOnly":true},"status":{"allOf":[{"$ref":"#/components/schemas/StatusEnum"}],"readOnly":true},"created_at":{"type":"string","format":"date-time","readOnly":true}},"required":["amount_thb","coins","created_at","id","slip_path","slip_url","status"]},"TopupRequestList":{"type":"object","properties":{"id":{"type":"integer","readOnly":true},"username":{"type":"string","readOnly":true},"amount_thb":{"type":"integer","readOnly":true},"coins":{"type":"integer","readOnly":true},"transfer_date":{"type":"string","format":"date","readOnly":true,"nullable":true},"transfer_time":{"type":"string","format":"time","readOnly":true,"nullable":true},"slip_url":{"type":"string","readOnly":true},"status":{"allOf":[{"$ref":"#/components/schemas/StatusEnum"}],"readOnly":true},"created_at":{"type":"string","format":"date-time","readOnly":true}},"required":["amount_thb","coins","created_at","id","slip_url","status","transfer_date","transfer_time","username"]},"TypeEnum":{"enum":["topup","capture","refund"],"type":"string","description":"* `topup` - topup\n* `capture` - capture\n* `refund` - refund"}},"securitySchemes":{"cookieAuth":{"type":"apiKey","in":"cookie","name":"sessionid"},"jwtAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}